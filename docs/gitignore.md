# 📄 .gitignore 文件详解

`.gitignore` 文件告诉 Git 哪些文件或目录应该被忽略，不纳入版本控制。这对于避免提交自动生成的文件、依赖库、编译产物、敏感信息等非常有用。

## 工作原理

-   在你的仓库根目录（或其他目录）创建一个名为 `.gitignore` 的文本文件。
-   在文件中列出你希望 Git 忽略的文件或目录模式。
-   Git 在执行 `git add` 等命令时，会检查 `.gitignore` 文件，并跳过匹配的文件。

## 基本语法

-   **空行:** 会被忽略，可以用作分隔符。
-   **`#` 开头:** 表示注释。
-   **文件名/目录名:** 忽略指定名称的文件或目录。例如 `node_modules/` 会忽略所有名为 `node_modules` 的目录。
-   **斜杠 `/`:**
    -   结尾的 `/` 表示这是一个目录。例如 `build/` 只会忽略目录，不会忽略同名文件。
    -   开头的 `/` 表示相对于 `.gitignore` 文件所在的目录。例如 `/logs` 只会忽略根目录下的 `logs` 文件夹，不会忽略 `src/logs`。
-   **星号 `*`:** 通配符，匹配零个或多个字符。例如 `*.log` 忽略所有 `.log` 结尾的文件。`*.[oa]` 忽略所有 `.o` 或 `.a` 结尾的文件。
-   **问号 `?`:** 匹配单个字符。例如 `file?.txt` 匹配 `file1.txt`, `fileA.txt` 但不匹配 `file10.txt`。
-   **方括号 `[]`:** 匹配方括号内的任意一个字符。例如 `[abc].log` 匹配 `a.log`, `b.log`, `c.log`。可以使用范围，如 `[0-9].log` 匹配 `0.log` 到 `9.log`。
-   **双星号 `**`:** 匹配多级目录。例如 `**/logs` 忽略任何层级下的 `logs` 目录。`a/**/z` 匹配 `a/z`, `a/b/z`, `a/b/c/z` 等。
-   **感叹号 `!`:** 取消忽略。如果一个文件同时匹配忽略规则和取消忽略规则，以最后定义的规则为准。例如：
    ```gitignore
    *.log       # 忽略所有 .log 文件
    !important.log # 但不忽略 important.log
    ```
    或者：
    ```gitignore
    logs/       # 忽略 logs 目录
    !logs/debug.log # 但不忽略 logs/debug.log
    !logs/       # 错误示例：这不会取消忽略 logs 目录下的所有文件
    !logs/**     # 正确示例：取消忽略 logs 目录下的所有文件和子目录
    ```

## 常见忽略项

-   **依赖目录:** `node_modules/`, `vendor/`, `packages/`
-   **编译产物:** `build/`, `dist/`, `*.o`, `*.class`, `*.exe`
-   **日志文件:** `*.log`, `logs/`
-   **系统文件:** `.DS_Store` (macOS), `Thumbs.db` (Windows)
-   **IDE/编辑器配置:** `.vscode/`, `.idea/`, `*.swp`
-   **敏感信息:** `config.ini`, `.env` (包含密码、API Key 等的文件) - **强烈建议不要提交这类文件！**

## 示例 `.gitignore` (Node.js 项目)

```gitignore
# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# Runtime data
pids
*.pid
*.seed
*.pid.lock

# Directory for instrumented libs generated by jscoverage/JSCover
lib-cov

# Coverage directory used by tools like istanbul
coverage

# nyc test coverage
.nyc_output

# Grunt intermediate storage (http://gruntjs.com/creating-plugins#storing-task-files)
.grunt

# Bower dependency directory (https://bower.io/)
bower_components

# node-waf configuration
.lock-wscript

# Compiled binary addons (https://nodejs.org/api/addons.html)
build/Release

# Dependency directories
node_modules/
jspm_packages/

# Optional npm cache directory
.npm

# Optional eslint cache
.eslintcache

# Optional REPL history
.node_repl_history

# Output of 'npm pack'
*.tgz

# Yarn Integrity file
.yarn-integrity

# dotenv environment variables file
.env
.env.test

# parcel-bundler cache (https://parceljs.org/)
.cache

# Next.js build output
.next

# Nuxt.js build / generate output
.nuxt
dist

# Gatsby files
.cache/
# Comment in the public line in if your project uses Gatsby and not Next.js
# https://nextjs.org/blog/next-9-1#public-directory-support
# public

# vuepress build output
.vuepress/dist

# Serverless directories
.serverless/

# FuseBox cache
.fusebox/

# DynamoDB Local files
.dynamodb/

# TernJS port file
.tern-port

# Stores VSCode configuration files
.vscode/
```

## 注意事项

-   `.gitignore` 文件本身应该被添加到 Git 仓库并提交。
-   `.gitignore` 只能忽略那些尚未被 Git 跟踪 (tracked) 的文件。如果一个文件已经被 `git add` 并 `git commit` 过，那么即使之后把它加入 `.gitignore`，Git 仍然会继续跟踪它的变动。你需要先从 Git 的跟踪列表中移除它：
    ```bash
    # 停止跟踪文件，但保留在本地
    git rm --cached <文件名>
    # 停止跟踪目录，但保留在本地
    git rm -r --cached <目录名>
    # 然后提交这个移除操作
    git commit -m "Stop tracking <文件名/目录名>"
    ```
-   可以在仓库的不同子目录中放置 `.gitignore` 文件，规则会逐级生效。
-   可以使用全局的 `.gitignore` 文件来忽略所有本地仓库都适用的文件（例如编辑器临时文件）。配置方法：
    ```bash
    git config --global core.excludesfile ~/.gitignore_global
    # 然后创建并编辑 ~/.gitignore_global 文件
    ```

**强烈推荐使用 GitHub 提供的 `.gitignore` 模板:** https://github.com/github/gitignore
